<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-ar="محلل الشخصيات - Big Five" data-en="Personality Analyzer - Big Five">محلل الشخصيات - Big Five</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <header class="page-header">
    <h1 data-ar="محلل الشخصيات العلمي 🧠" data-en="Scientific Personality Analyzer 🧠">محلل الشخصيات العلمي 🧠</h1>
    <nav>
      <ul>
        <li><a href="index.html" data-ar="الرئيسية" data-en="Home">الرئيسية</a></li>
        <li><a href="personality-analyzer.html" data-ar="محلل الشخصيات" data-en="Personality Analyzer">محلل الشخصيات</a></li>
        <li><a href="daily-quotes.html" data-ar="اقتباسات اليوم" data-en="Daily Quotes">اقتباسات اليوم</a></li>
        <li><a href="secret-projects.html" data-ar="مشاريع خاصة" data-en="Secret Projects">مشاريع خاصة</a></li>
        <li><a href="message.html" data-ar="تواصل معنا" data-en="Contact Us">تواصل معنا</a></li>
      </ul>
    </nav>
  </header>
  <main class="flex-grow flex items-center justify-center p-4">
    <section class="main-content-section">
      <p class="text-xl leading-relaxed mb-6" data-ar="هذا التحليل مبني على نموذج علم النفس العالمي (العوامل الخمسة الكبرى - Big Five). أجب على كل سؤال بدقة وصدق للحصول على نتيجة علمية دقيقة." data-en="This analysis is based on the global psychological model (Big Five Factors). Answer each question accurately and honestly to get a precise scientific result.">
        هذا التحليل مبني على نموذج علم النفس العالمي (العوامل الخمسة الكبرى - Big Five). أجب على كل سؤال بدقة وصدق للحصول على نتيجة علمية دقيقة.
      </p>
      <form id="personalityForm" class="text-right">
        <div class="question-group">
          <h3 data-ar="1. أستمتع بأن أكون مع الآخرين معظم الوقت." data-en="1. I enjoy being with others most of the time.">1. أستمتع بأن أكون مع الآخرين معظم الوقت.</h3>
          <div class="options">
            <label><input type="radio" name="q1" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q1" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q1" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q1" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q1" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="2. أحرص على إنهاء مهامي في الوقت المحدد." data-en="2. I make sure to complete my tasks on time.">2. أحرص على إنهاء مهامي في الوقت المحدد.</h3>
          <div class="options">
            <label><input type="radio" name="q2" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q2" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q2" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q2" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q2" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="3. أشعر بالقلق بسهولة عند حدوث شيء جديد." data-en="3. I get anxious easily when something new happens.">3. أشعر بالقلق بسهولة عند حدوث شيء جديد.</h3>
          <div class="options">
            <label><input type="radio" name="q3" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q3" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q3" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q3" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q3" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="4. أجد نفسي دائمًا أساعد الآخرين حتى دون طلب." data-en="4. I always find myself helping others, even without being asked.">4. أجد نفسي دائمًا أساعد الآخرين حتى دون طلب.</h3>
          <div class="options">
            <label><input type="radio" name="q4" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q4" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q4" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q4" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q4" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="5. أحب تجربة أفكار جديدة حتى لو كانت غريبة." data-en="5. I like to try new ideas, even if they are unusual.">5. أحب تجربة أفكار جديدة حتى لو كانت غريبة.</h3>
          <div class="options">
            <label><input type="radio" name="q5" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q5" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q5" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q5" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q5" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="6. أستمد طاقتي من التفاعل الاجتماعي." data-en="6. I get my energy from social interaction.">6. أستمد طاقتي من التفاعل الاجتماعي.</h3>
          <div class="options">
            <label><input type="radio" name="q6" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q6" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q6" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q6" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q6" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="7. أنظم يومي وأضع خططًا واضحة لنفسي." data-en="7. I organize my day and make clear plans for myself.">7. أنظم يومي وأضع خططًا واضحة لنفسي.</h3>
          <div class="options">
            <label><input type="radio" name="q7" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q7" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q7" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q7" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q7" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="8. أشعر بالإحباط بسهولة في المواقف الصعبة." data-en="8. I get easily frustrated in difficult situations.">8. أشعر بالإحباط بسهولة في المواقف الصعبة.</h3>
          <div class="options">
            <label><input type="radio" name="q8" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q8" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q8" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q8" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q8" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="9. أفضل التفاهم على الجدال في علاقاتي." data-en="9. I prefer understanding over arguing in my relationships.">9. أفضل التفاهم على الجدال في علاقاتي.</h3>
          <div class="options">
            <label><input type="radio" name="q9" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q9" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q9" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q9" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q9" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="question-group">
          <h3 data-ar="10. أستمتع بالفنون والقراءة عن موضوعات متنوعة." data-en="10. I enjoy arts and reading about various topics.">10. أستمتع بالفنون والقراءة عن موضوعات متنوعة.</h3>
          <div class="options">
            <label><input type="radio" name="q10" value="5"> <span data-ar="أوافق جدًا" data-en="Strongly agree">أوافق جدًا</span></label>
            <label><input type="radio" name="q10" value="4"> <span data-ar="أوافق" data-en="Agree">أوافق</span></label>
            <label><input type="radio" name="q10" value="3"> <span data-ar="محايد" data-en="Neutral">محايد</span></label>
            <label><input type="radio" name="q10" value="2"> <span data-ar="لا أوافق" data-en="Disagree">لا أوافق</span></label>
            <label><input type="radio" name="q10" value="1"> <span data-ar="لا أوافق أبدًا" data-en="Strongly disagree">لا أوافق أبدًا</span></label>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row justify-center gap-4 mt-8">
          <button type="submit" id="analyzeBtn" class="btn-primary-custom" data-ar="حلل شخصيتي" data-en="Analyze My Personality">حلل شخصيتي</button>
        </div>
      </form>
      <div id="resultCard" class="mx-auto rounded-xl shadow-xl p-6 max-w-md text-center mt-8" style="display:none;">
        <h3 class="text-2xl font-bold mb-2" data-ar="نتيجتك العلمية" data-en="Your Scientific Result">نتيجتك العلمية</h3>
        <div id="resultsChart" class="mb-6 text-right"></div>
        <div id="resultsDetails" class="mb-4 text-right"></div>
        <button id="deepAnalysisBtn" class="btn-primary-custom mt-3" data-ar="تحليل أعمق" data-en="Deeper Analysis">تحليل أعمق</button>
        <button id="resetBtn" class="btn-primary-custom mt-3" data-ar="إعادة التعيين" data-en="Reset">إعادة التعيين</button>
      </div>
      <div id="deepAnalysisSection" style="display:none;" class="mt-8 main-content-section form-container mx-auto">
        <form id="deepAnalysisForm" class="text-right p-0 mt-0" style="background: none; box-shadow: none;">
          <div class="question-group">
            <h3 data-ar="1. حين تشعر بالضغط أو الغضب الشديد..." data-en="1. When you feel intense pressure or anger...">1. حين تشعر بالضغط أو الغضب الشديد...</h3>
            <div class="options">
              <label><input type="radio" name="dq1" value="1"> <span data-ar="أستطيع التحكم في انفعالاتي وأبحث عن حلول هادئة" data-en="I can control my emotions and look for calm solutions">أستطيع التحكم في انفعالاتي وأبحث عن حلول هادئة</span></label>
              <label><input type="radio" name="dq1" value="2"> <span data-ar="أواجه صعوبة أحيانًا في ضبط أعصابي ولكن أعود للهدوء" data-en="I sometimes find it hard to control my temper but return to calm">أواجه صعوبة أحيانًا في ضبط أعصابي ولكن أعود للهدوء</span></label>
              <label><input type="radio" name="dq1" value="3"> <span data-ar="أجد نفسي أتصرف بعصبية ولا أتمالك نفسي بسهولة" data-en="I find myself acting impulsively and can't easily control myself">أجد نفسي أتصرف بعصبية ولا أتمالك نفسي بسهولة</span></label>
            </div>
          </div>
          <div class="question-group">
            <h3 data-ar="2. عند مواجهة فشل أو نقد شديد..." data-en="2. When facing significant failure or criticism...">2. عند مواجهة فشل أو نقد شديد...</h3>
            <div class="options">
              <label><input type="radio" name="dq2" value="1"> <span data-ar="أحلل الخطأ وأتعلم وأحاول من جديد" data-en="I analyze the mistake, learn, and try again">أحلل الخطأ وأتعلم وأحاول من جديد</span></label>
              <label><input type="radio" name="dq2" value="2"> <span data-ar="أشعر بالإحباط ثم أستعيد ثقتي بالتدريج" data-en="I feel frustrated then gradually regain my confidence">أشعر بالإحباط ثم أستعيد ثقتي بالتدريج</span></label>
              <label><input type="radio" name="dq2" value="3"> <span data-ar="يصيبني القلق والتوتر وأفقد الحماس بسرعة" data-en="I become anxious and stressed and quickly lose enthusiasm">يصيبني القلق والتوتر وأفقد الحماس بسرعة</span></label>
            </div>
          </div>
          <div class="question-group">
            <h3 data-ar="3. في العلاقات الاجتماعية..." data-en="3. In social relationships...">3. في العلاقات الاجتماعية...</h3>
            <div class="options">
              <label><input type="radio" name="dq3" value="1"> <span data-ar="أستطيع قراءة مشاعر الآخرين بسهولة وأتعاطف معهم" data-en="I can easily read others' emotions and empathize with them">أستطيع قراءة مشاعر الآخرين بسهولة وأتعاطف معهم</span></label>
              <label><input type="radio" name="dq3" value="2"> <span data-ar="أحتاج وقتاً لفهم دوافع ومشاعر الناس" data-en="I need time to understand people's motives and feelings">أحتاج وقتاً لفهم دوافع ومشاعر الناس</span></label>
              <label><input type="radio" name="dq3" value="3"> <span data-ar="أركز أكثر على مشاعري ولا أنتبه كثيراً للآخرين" data-en="I focus more on my own feelings and don't pay much attention to others">أركز أكثر على مشاعري ولا أنتبه كثيراً للآخرين</span></label>
            </div>
          </div>
          <div class="question-group">
            <h3 data-ar="4. عندما تواجه تغييرًا كبيرًا في حياتك..." data-en="4. When you face a major change in your life...">4. عندما تواجه تغييرًا كبيرًا في حياتك...</h3>
            <div class="options">
              <label><input type="radio" name="dq4" value="1"> <span data-ar="أتكيف بسرعة وأعتبرها فرصة للتعلم" data-en="I adapt quickly and see it as a learning opportunity">أتكيف بسرعة وأعتبرها فرصة للتعلم</span></label>
              <label><input type="radio" name="dq4" value="2"> <span data-ar="أحتاج وقتاً للتأقلم لكني أقبل التغيير بالنهاية" data-en="I need time to adjust but eventually accept the change">أحتاج وقتاً للتأقلم لكني أقبل التغيير بالنهاية</span></label>
              <label><input type="radio" name="dq4" value="3"> <span data-ar="أشعر بالتوتر وأحب الروتين والاستقرار" data-en="I feel stressed and prefer routine and stability">أشعر بالتوتر وأحب الروتين والاستقرار</span></label>
            </div>
          </div>
          <div class="question-group">
            <h3 data-ar="5. ما الذي يحفزك أكثر؟" data-en="5. What motivates you most?">5. ما الذي يحفزك أكثر؟</h3>
            <div class="options">
              <label><input type="radio" name="dq5" value="1"> <span data-ar="أهداف ذات معنى وتجديد مستمر" data-en="Meaningful goals and continuous renewal">أهداف ذات معنى وتجديد مستمر</span></label>
              <label><input type="radio" name="dq5" value="2"> <span data-ar="تقدير الآخرين والشعور بالأمان" data-en="Others' appreciation and feeling secure">تقدير الآخرين والشعور بالأمان</span></label>
              <label><input type="radio" name="dq5" value="3"> <span data-ar="روتين واضح وإنجازات صغيرة متكررة" data-en="Clear routines and repeated small achievements">روتين واضح وإنجازات صغيرة متكررة</span></label>
            </div>
          </div>
          <div class="flex justify-center gap-4 mt-8">
            <button type="submit" class="btn-primary-custom" data-ar="حلل شخصيتي بعمق" data-en="Analyze My Personality Deeply">حلل شخصيتي بعمق</button>
            <button type="button" id="resetDeepBtn" class="btn-primary-custom" data-ar="إعادة التعيين" data-en="Reset">إعادة التعيين</button>
          </div>
        </form>
        <div id="deepResult" class="mt-6"></div>
      </div>
    </section>
  </main>
  <footer class="footer-insta">
    <a href="#" onclick="openInstagram()" class="insta-card" id="instaLink">
      <div class="insta-text-group">
        <span class="insta-username">0alaswad</span> <span class="insta-follow" data-ar="تابعني!" data-en="Follow me!">تابعني!</span>
      </div>
      <svg viewBox="0 0 448 512">
        <defs>
          <linearGradient id="insta-gradient" x1="0" x2="1" y1="0" y2="1">
            <stop stop-color="#fd5"/>
            <stop offset="0.4" stop-color="#ff543e"/>
            <stop offset="0.6" stop-color="#c837ab"/>
            <stop offset="1" stop-color="#4a54e1"/>
          </linearGradient>
        </defs>
        <path fill="url(#insta-gradient)" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9 0 63.6 51.3 114.9 114.9 114.9 63.6 0 114.9-51.3 114.9-114.9 0-63.6-51.3-114.9-114.9-114.9zm0 186.6c-39.6 0-71.7-32.1-71.7-71.7 0-39.6 32.1-71.7 71.7-71.7 39.6 0 71.7 32.1 71.7 71.7 0 39.6-32.1 71.7-71.7 71.7zm146.4-194.3c0 14.9-12 26.9-26.9 26.9s-26.9-12-26.9-26.9 12-26.9 26.9-26.9 26.9 12 26.9 26.9zm76.1 27.2c-1.7-35.3-9.9-66.7-36.2-92.9S371.5 5.7 336.2 4C300.6 2.3 178.4 2.3 142.8 4 107.5 5.7 76.1 13.9 49.9 40.1 23.7 66.4 15.5 97.7 13.8 133c-1.7 35.6-1.7 157.8 0 193.4 1.7 35.3 9.9 66.7 36.2 92.9s57.6 34.5 92.9 36.2c35.6 1.7 157.8 1.7 193.4 0 35.3-1.7 66.7-9.9 92.9-36.2s34.5-57.6 36.2-92.9c1.7-35.6 1.7-157.8 0-193.4zM398.8 388c-7.8 19.5-22.9 34.6-42.4 42.4-29.4 11.7-99.2 9-132.4 9s-103 .6-132.4-9c-19.5-7.8-34.6-22.9-42.4-42.4-11.7-29.4-9-99.2-9-132.4s-.6-103 9-132.4c7.8-19.5 22.9-34.6 42.4-42.4 29.4-11.7 99.2-9 132.4-9s103-.6 132.4 9c19.5 7.8 34.6 22.9 42.4 42.4 11.7 29.4 9 99.2 9 132.4s.6 103-9 132.4z"/>
      </svg>
    </a>
  </footer>

  <div class="language-switcher">
    <button id="langToggle">English</button>
  </div>

  <script>
    const TRAIT_NAMES = {
      extraversion: { ar: "الانبساط", en: "Extraversion" },
      conscientiousness: { ar: "الضمير/الاجتهاد", en: "Conscientiousness" },
      neuroticism: { ar: "العصبية (الحساسية للضغط)", en: "Neuroticism (Stress Sensitivity)" },
      agreeableness: { ar: "التوافق", en: "Agreeableness" },
      openness: { ar: "الانفتاح على الخبرة", en: "Openness to Experience" }
    };
    const TRAIT_DESCS = {
      extraversion: [
        { ar: "شخص اجتماعي، منفتح، ويميل للاستمتاع مع الآخرين. لديك طاقة عالية وحب للتواصل.", en: "You are social, outgoing, and enjoy being with others. You have high energy and love to connect." },
        { ar: "تميل إلى التوازن في تفاعلك الاجتماعي. تتكيف مع المواقف حسب الحاجة.", en: "You tend to be balanced in your social interactions. You adapt to situations as needed." },
        { ar: "تفضل العزلة أو التجمعات الصغيرة. تشعر بالراحة أكثر في المساحات الهادئة.", en: "You prefer solitude or small gatherings. You feel more comfortable in quiet spaces." }
      ],
      conscientiousness: [
        { ar: "منظم، مجتهد، تلتزم بوعودك وتضع خططًا واضحة. تعتمد عليك في العمل والدراسة.", en: "You are organized, diligent, keep your promises, and make clear plans. You are reliable in work and study." },
        { ar: "تحافظ على قدر متوسط من الالتزام والتنظيم. أحيانًا تتكاسل، وأحيانًا تنجز الكثير.", en: "You maintain a moderate level of commitment and organization. Sometimes you procrastinate, and sometimes you achieve a lot." },
        { ar: "تميل للعشوائية وتواجه صعوبة في التنظيم أو إتمام المهام في الوقت المحدد.", en: "You tend to be spontaneous and find it difficult to organize or complete tasks on time." }
      ],
      neuroticism: [
        { ar: "عاطفي أو حساس للضغط أكثر من المتوسط. قد تتأثر بسهولة بمواقف الحياة، لكن بإمكانك التعافي.", en: "You are emotional or more sensitive to stress than average. You may be easily affected by life situations, but you can recover." },
        { ar: "تملك استقرارًا انفعاليًا جيدًا، تتحكم بمشاعرك معظم الوقت وتتعلم من المواقف.", en: "You have good emotional stability, control your feelings most of the time, and learn from situations." },
        { ar: "هادئ تحت الضغط ونادرًا ما تتأثر سلبيًا. تستجيب للمصاعب بحكمة وهدوء.", en: "You are calm under pressure and rarely affected negatively. You respond to difficulties with wisdom and composure." }
      ],
      agreeableness: [
        { ar: "متعاون، كريم، ومتعاطف مع الآخرين. تهتم بمشاعر الناس وتحرص على مساعدتهم.", en: "You are cooperative, generous, and empathetic towards others. You care about people's feelings and are keen to help them." },
        { ar: "تحافظ على علاقات طيبة مع معظم الناس، لكنك تضع حدودًا واضحة لنفسك.", en: "You maintain good relationships with most people, but you set clear boundaries for yourself." },
        { ar: "مستقل في رأيك وقد تبدو أحيانًا صارمًا أو تنافسيًا في مواقف معينة.", en: "You are independent in your opinion and may sometimes seem strict or competitive in certain situations." }
      ],
      openness: [
        { ar: "مبدع، فضولي، تحب التجارب الجديدة والأفكار المتنوعة، وتتقبل التغيير بسهولة.", en: "You are creative, curious, love new experiences and diverse ideas, and accept change easily." },
        { ar: "توازن بين حبك للتجديد وبين تمسكك ببعض العادات المألوفة.", en: "You balance your love for novelty with adherence to some familiar habits." },
        { ar: "تميل للتقليدية وتفضل الروتين، وقد تشعر بعدم الارتياح مع التغييرات المفاجئة.", en: "You tend to be traditional and prefer routine, and may feel uncomfortable with sudden changes." }
      ]
    };
    const DEEP_ANALYSIS_DESCS = [
      {
          scoreRange: [1, 7],
          ar: "<b>تحليل عميق:</b> لديك مرونة نفسية عالية، ذكاء عاطفي قوي، وقدرة على التكيف مع الحياة. تظهر نضجًا في التعامل مع الضغط والعلاقات والتغيير، وتبحث دائمًا عن معنى عميق في ما تفعله.",
          en: "<b>Deep Analysis:</b> You have high psychological resilience, strong emotional intelligence, and the ability to adapt to life. You show maturity in handling pressure, relationships, and change, and always seek deep meaning in what you do."
      },
      {
          scoreRange: [8, 11],
          ar: "<b>تحليل عميق:</b> لديك توازن جيد في شخصيتك، أحيانًا تسيطر على مشاعرك وأحيانًا تتأثر، تحتاج فقط لبعض تطوير المرونة وزيادة المبادرة في التغيير والمواقف الجديدة.",
          en: "<b>Deep Analysis:</b> You have a good balance in your personality. Sometimes you control your emotions, and sometimes you are affected. You just need to develop more flexibility and take more initiative in changes and new situations."
      },
      {
          scoreRange: [12, 15],
          ar: "<b>تحليل عميق:</b> حساسيتك مرتفعة للضغوط، تحتاج لتقوية مهارات ضبط النفس وإدارة القلق والتكيف مع التغيير. حاول ممارسة التأمل والبحث عن مصادر أمان ومرونة في محيطك.",
          en: "<b>Deep Analysis:</b> Your sensitivity to pressure is high. You need to strengthen self-control skills, manage anxiety, and adapt to change. Try practicing meditation and seeking sources of security and flexibility in your surroundings."
      }
    ];

    function analyzeBigFive(answers) {
      const mapping = {
        extraversion: [+answers.q1, +answers.q6],
        conscientiousness: [+answers.q2, +answers.q7],
        neuroticism: [+answers.q3, +answers.q8],
        agreeableness: [+answers.q4, +answers.q9],
        openness: [+answers.q5, +answers.q10]
      };
      let scores = {};
      Object.keys(mapping).forEach(trait => {
        scores[trait] = mapping[trait].reduce((a, b) => a + b, 0);
      });
      return scores;
    }

    function traitDesc(trait, value, lang) {
      if (value >= 8) return TRAIT_DESCS[trait][0][lang];
      if (value >= 5) return TRAIT_DESCS[trait][1][lang];
      return TRAIT_DESCS[trait][2][lang];
    }

    function showBigFiveResults(scores, lang) {
      let chart = '';
      let details = '';
      Object.keys(scores).forEach(trait => {
        const value = scores[trait];
        const percent = Math.round((value / 10) * 100);
        chart += `
          <div class="mb-1">
            <span class="trait-title">${TRAIT_NAMES[trait][lang]}</span>
            <div class="bar bar-bg">
              <div class="bar bar-fill" style="width:${percent}%;"></div>
            </div>
            <span class="text-xs" style="color:#F0F5F9;">${lang === 'ar' ? 'درجتك:' : 'Your score:'} ${value} / 10</span>
          </div>
        `;
        details += `<p class="mt-2" style="color:#F0F5F9;"><b>${TRAIT_NAMES[trait][lang]}:</b> ${traitDesc(trait, value, lang)}</p>`;
      });
      document.getElementById('resultsChart').innerHTML = `<div>${chart}</div>`;
      document.getElementById('resultsDetails').innerHTML = `<div>${details}</div>`;
    }

    function resetPersonality() {
      const radios = document.querySelectorAll('#personalityForm input[type="radio"]');
      radios.forEach(r => r.checked = false);
      const deepRadios = document.querySelectorAll('#deepAnalysisForm input[type="radio"]');
      if (deepRadios) deepRadios.forEach(r => r.checked = false);
      const deepResult = document.getElementById('deepResult');
      if (deepResult) deepResult.innerHTML = "";
      document.getElementById('deepAnalysisSection').style.display = "none";
      const card = document.getElementById('resultCard');
      card.classList.remove('active');
      setTimeout(() => { card.style.display = "none"; }, 600);
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.addEventListener('DOMContentLoaded', () => {
      let currentLang = localStorage.getItem('currentLang') || document.documentElement.lang; // Read from localStorage or default

      document.getElementById('personalityForm').addEventListener('submit', function(e) {
        e.preventDefault();
        let answers = {};
        for(let i=1;i<=10;i++) {
          const val = document.querySelector(`input[name="q${i}"]:checked`);
          if(!val) {
            alert(currentLang === 'ar' ? "يرجى الإجابة على جميع الأسئلة!" : "Please answer all questions!");
            return;
          }
          answers['q'+i] = val.value;
        }
        const scores = analyzeBigFive(answers);
        showBigFiveResults(scores, currentLang);
        document.getElementById('resultCard').style.display = "block";
        setTimeout(() => { document.getElementById('resultCard').classList.add('active'); }, 50);
        setTimeout(() => { document.getElementById('resultCard').scrollIntoView({behavior:'smooth', block:'center'}); }, 500);
      });

      document.getElementById('resetBtn').onclick = resetPersonality;

      document.getElementById('deepAnalysisBtn').onclick = function() {
        document.getElementById('deepAnalysisSection').style.display = "block";
        document.getElementById('deepAnalysisSection').scrollIntoView({ behavior: 'smooth', block: 'center' });
      };

      document.getElementById('resetDeepBtn').onclick = function() {
        const radios = document.querySelectorAll('#deepAnalysisForm input[type="radio"]');
        radios.forEach(r => r.checked = false);
        document.getElementById('deepResult').innerHTML = "";
        document.getElementById('deepAnalysisSection').style.display = "none";
      };

      document.getElementById('deepAnalysisForm').onsubmit = function(e) {
        e.preventDefault();
        let arr = [];
        for(let i=1;i<=5;i++) {
          const val = document.querySelector(`input[name="dq${i}"]:checked`);
          if(!val) {
            alert(currentLang === 'ar' ? "يرجى الإجابة على جميع أسئلة التحليل الأعمق!" : "Please answer all deep analysis questions!");
            return;
          }
          arr.push(+val.value);
        }
        let totalScore = arr.reduce((a,b)=>a+b,0);
        let resultText = '';
        for (const desc of DEEP_ANALYSIS_DESCS) {
            if (totalScore >= desc.scoreRange[0] && totalScore <= desc.scoreRange[1]) {
                resultText = desc[currentLang];
                break;
            }
        }
        document.getElementById('deepResult').innerHTML = `<div class="p-4 rounded-xl mt-4 text-right">${resultText}</div>`;
      };

      window.openInstagram = function() {
        const username = "0alaswad";
        const appLink = `instagram://user?username=${username}`;
        const webLink = `https://www.instagram.com/${username}`;
        window.location.href = appLink;
        setTimeout(() => { window.location.href = webLink; }, 1500);
      }

      // Language Switcher Logic (Updated for persistence)
      const langToggleBtn = document.getElementById('langToggle');

      function updateContent(lang) {
        document.documentElement.lang = lang;
        document.documentElement.dir = (lang === 'ar') ? 'rtl' : 'ltr';

        document.querySelectorAll('[data-ar]').forEach(element => {
          if (element.hasAttribute('data-ar') && element.hasAttribute('data-en')) {
            element.textContent = (lang === 'ar') ? element.getAttribute('data-ar') : element.getAttribute('data-en');
          }
        });
        document.querySelectorAll('[data-ar-placeholder]').forEach(element => {
            if (element.hasAttribute('data-ar-placeholder') && element.hasAttribute('data-en-placeholder')) {
                element.placeholder = (lang === 'ar') ? element.getAttribute('data-ar-placeholder') : element.getAttribute('data-en-placeholder');
            }
        });
        const instaCard = document.getElementById('instaLink');
        if (instaCard) {
            if (lang === 'ar') {
                instaCard.classList.remove('en-layout');
                instaCard.classList.add('ar-layout');
            } else {
                instaCard.classList.remove('ar-layout');
                instaCard.classList.add('en-layout');
            }
        }

        langToggleBtn.textContent = (lang === 'ar') ? 'English' : 'العربية';
        currentLang = lang;
        localStorage.setItem('currentLang', lang);

        const resultCard = document.getElementById('resultCard');
        if (resultCard && resultCard.classList.contains('active')) {
            const currentAnswers = {};
            for(let i=1;i<=10;i++) {
                const checkedRadio = document.querySelector(`input[name="q${i}"]:checked`);
                if(checkedRadio) currentAnswers['q'+i] = checkedRadio.value;
            }
            if (Object.keys(currentAnswers).length === 10) {
                const scores = analyzeBigFive(currentAnswers);
                showBigFiveResults(scores, lang); // إعادة عرض النتائج باللغة الجديدة
            }
        }
        const deepAnalysisSection = document.getElementById('deepAnalysisSection');
        if (deepAnalysisSection && deepAnalysisSection.style.display !== 'none' && document.getElementById('deepResult').innerHTML !== '') {
            const currentDeepAnswers = [];
            for(let i=1;i<=5;i++) {
                const checkedRadio = document.querySelector(`#deepAnalysisForm input[name="dq${i}"]:checked`);
                if(checkedRadio) currentDeepAnswers.push(+checkedRadio.value);
            }
            if (currentDeepAnswers.length === 5) {
                let totalScore = currentDeepAnswers.reduce((a,b)=>a+b,0);
                let resultText = '';
                for (const desc of DEEP_ANALYSIS_DESCS) {
                    if (totalScore >= desc.scoreRange[0] && totalScore <= desc.scoreRange[1]) {
                        resultText = desc[lang]; // استخدم اللغة الجديدة هنا
                        break;
                    }
                }
                document.getElementById('deepResult').innerHTML = `<div class="p-4 rounded-xl mt-4 text-right">${resultText}</div>`;
            }
        }
      }

      updateContent(currentLang);

      langToggleBtn.addEventListener('click', () => {
        const newLang = (currentLang === 'ar') ? 'en' : 'ar';
        updateContent(newLang);
      });
    });
  </script>
</body>
</html>